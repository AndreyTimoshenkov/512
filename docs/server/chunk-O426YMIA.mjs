import './polyfills.server.mjs';
import{E as L,H as u,I as N,K as P,L as B,M as F,P as K,V as W,a as i,b as S,c as _,d as y,e as a,f,g as b,h as d,i as x,j as w,k as I,l as G,m as l,n as s,o as E,p as k,q as V,r as R,s as M,t as D,u as O,v as H,w as c,x as T,y as v,z as p}from"./chunk-FTZPPAYI.mjs";import{a as A}from"./chunk-5XUXGTUW.mjs";var $=[[["grid-cell"]]],J=["grid-cell"],g=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=i({type:o,selectors:[["grid-container"]],standalone:!0,features:[p],ngContentSelectors:J,decls:1,vars:0,template:function(e,n){e&1&&(R($),M(0))},styles:["[_nghost-%COMP%]{background:#aa8b6d;padding:2px;width:416px;display:flex;flex-wrap:wrap}"]})};function U(o,t){if(o&1&&(l(0,"p",1),c(1),s()),o&2){let e=V();a(),T(e._cellState.value)}}var m=class o{_cellState={key:null,value:0};cellState=f();constructor(){u(()=>{this.stateEmitter.emit(this.cellState())})}ngOnChanges(t){this.cellState.set(A({},this._cellState))}stateEmitter=new _;set value(t){this._cellState.value=t}get val(){return this._cellState.value}set key(t){this._cellState.key=t}get hasValue(){return!!this.val}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=i({type:o,selectors:[["grid-cell"]],hostAttrs:["class.value","hasValue"],hostVars:2,hostBindings:function(e,n){e&2&&x("has-value",n.hasValue)},inputs:{value:"value",key:[0,"cellKey","key"]},outputs:{stateEmitter:"gridCellEmitter"},standalone:!0,features:[S,p],decls:1,vars:1,consts:[["class","value",4,"ngIf"],[1,"value"]],template:function(e,n){e&1&&b(0,U,2,1,"p",0),e&2&&d("ngIf",n.hasValue)},dependencies:[P],styles:["[_nghost-%COMP%]{display:flex;width:100px;height:100px;background:#eee4da59;margin:2px;align-items:center;justify-content:center;color:gray;background-color:orange;transition:.3s}.value[_ngcontent-%COMP%]{font-size:90px;margin:0}"]})};function X(o,t){if(o&1&&E(0,"grid-cell",1),o&2){let e=t.$implicit;d("cellKey",e.key)("cellValue",e.value)}}var C=class o{title="512";state=f([]);turn=0;cellList=[];constructor(){u(()=>{if(this.cellList.length)for(let t of this.state())this.cellList.forEach(e=>{e._cellState.key===t.key&&(e._cellState.value=t.value)})})}ngAfterViewInit(){this.generateKeys(),this.generateValues()}right(t){this.generateValues(),this.turn+=1}left(t){this.generateValues(),this.turn+=1}shiftArrayRight(t){for(let e=0;e<t.length-1;e++)(t[e]&&!t[e+1]||t[e]===t[e+1])&&(t[e+1]+=t[e],t[e]=0);for(let e=0;e<t.length-1;e++)t[e]&&!t[e+1]&&(t[e+1]+=t[e],t[e]=0);return t}shiftArrayLeft(t){for(let e=t.length-1;e>0;e--)(t[e]&&!t[e-1]||t[e]===t[e-1])&&(t[e-1]+=t[e],t[e]=0);for(let e=t.length-1;e>0;e--)t[e]&&!t[e-1]&&(t[e-1]=t[e],t[e]=0);return t}onGridCellEmit(t){}generateKeys(t=4,e=4){for(let n=0;n<t*e;n++)this.state.update(r=>[...r,{key:n,value:0}])}generateValues(){let t=this.state(),e=t.filter(r=>!r.value);if(!e.length){console.log("GAME OVER!!");return}let n=this.getRandomArrayEl(e);t.forEach(r=>{r.key===n.key&&(r.value=2)}),this.turn||(e=t.filter(r=>!r.value),n=this.getRandomArrayEl(e),t.forEach(r=>{r.key===n.key&&(r.value=2)})),this.state.update(()=>[...t])}getRandomArrayEl(t){let e=Math.floor(Math.random()*t.length);return t[e]}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=i({type:o,selectors:[["app-root"]],viewQuery:function(e,n){if(e&1&&D(m,5),e&2){let r;O(r=H())&&(n.cellList=r)}},hostBindings:function(e,n){e&1&&k("keydown.ArrowRight",function(h){return n.right(h)},!1,y)("keydown.ArrowLeft",function(h){return n.left(h)},!1,y)},standalone:!0,features:[p],decls:8,vars:2,consts:[[1,"scoreboard"],[3,"cellKey","cellValue"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"h1"),c(2),s(),l(3,"h1"),c(4),s()(),l(5,"grid-container"),I(6,X,1,2,"grid-cell",1,w),s()),e&2&&(a(2),v("Turn: ",n.turn,""),a(2),v("Turn: ",n.turn,""),a(2),G(n.state()))},dependencies:[g,m],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:90svh;flex-direction:column}.scoreboard[_ngcontent-%COMP%]{display:flex;gap:1rem;color:gray}"]})};var q=[];var z={providers:[L({eventCoalescing:!0}),W(q),F()]};var Y={providers:[K()]},Z=N(z,Y);var ee=()=>B(C,Z),je=ee;export{je as a};
